{{> add-lesson}}
<div class="container-fluid mt-4 row mx-auto" style="max-height: 100vh; max-width: 1600px;">
  <div class="col-12 mb-4">
    <div class="row">
      <div class="row d-flex align-items-center mb-4 flex-md-row col-md-8 gap-lg-4">
        {{#if teacher.User.avatar}}
        <img src="{{teacher.User.avatar}}" alt="" class="col-6 col-md-6 rounded-0"
          style="object-fit:contain; max-width:350px;">
        {{else}}
        <img src="https://via.placeholder.com/200x200" alt="" class="col-6 col-md-6 rounded-0"
          style="object-fit:contain; max-width:350px;">
        {{/if}}
        <div class="col-6 d-flex flex-column gap-3 gap-lg-4">
          <h3 class="fw-bold">{{teacher.User.name}}</h3>
          <div class="d-flex flex-column ">
            <p class="fs-6 fw-bold mb-1">{{teacher.User.nation}}</p>
            <div class="fw-bold">
              <i class="fa-solid fa-heart me-2" style="color: red;"></i>
              {{teacher.totalRating}}
            </div>
          </div>
        </div>
      </div>
      {{#unless user.isTeacher}}
      <div class="col-md-4">
        <form action="/lessons/{{teacher.id}}" method="post" class="d-flex flex-column gap-3">
          <label class="fw-bold fs-4 form-label bg-primary text-white col-12 px-2 py-1 rounded-1"
            for="createLesson">預約上課</label>
          <select class="form-select mb-3" aria-label="Default select example" id="createLesson" name="createLesson">
            <option selected disabled value="">Open this select menu</option>
            {{#each filteredAvailableDates}}
            <option value="{{postStartTimeAndEndTime this.startTime this.endTime}}">{{specifiedStartTime this.startTime}} ~ {{specifiedEndTime this.endTime}}</option>
            {{/each}}
          </select>
          <div class="d-flex justify-content-end">
            <button type="submit" class="btn btn-primary">Submit</button>
          </div>
        </form>
      </div>
      {{/unless}}
    </div>
  </div>
  <div class="col-md-8">
    <div class="mb-4">
      <h5 class="fw-bold">Introduction</h5>
      <p>
        {{teacher.courseDescription}}
      </p>
    </div>
    
    <div class="mb-4">
      <h5 class="fw-bold">Teaching Style</h5>
      <p>
        {{teacher.teachingMethod}}
      </p>
    </div>
    
    <div class="mb-4">
      <h5 class="fw-bold">Lesson History</h5>
      {{#each teacher.Ratings}}
      <div class="d-flex gap-2 align-items-center">
        <p class="text-center fw-bold bg-warning rounded-1 d-inline-flex px-2">{{this.rating}}</p>
        <p class="">{{this.comment}}</p>
      </div>
      {{/each}}
    </div>
  </div>
</div>